!function(){function t(t,o){function n(t){if(t&&t.length>0){var o=_.map(t,function(t){return{lat:t.latitude,"long":t.longitude,info:t.name}});travelMap.createMap({stops:o,selector:"#map",currentStop:1,initialZoom:3})}}var a=this;a.tripName=t.tripname,a.stops=[],a.errorMessage="",a.isBusy=!0,a.newStop={};var s="/api/trips/"+a.tripName+"/stops";o.get("/api/trips/"+a.tripName+"/stops").then(function(t){angular.copy(t.data,a.stops),n(a.stops)},function(t){a.errorMessage="Failed to load stops: "+t})["finally"](function(){a.isBusy=!1}),a.addStop=function(){a.isBusy=!0,o.post(s,a.newStop).then(function(t){a.stops.push(t.data),n(a.stops),a.newStop={}},function(t){a.errorMessage="Failed to add stop: "+t})["finally"](function(){a.isBusy=!1})}}t.$inject=["$routeParams","$http"];var o=angular.module("app-trips");o.controller("tripEditorController",t)}();